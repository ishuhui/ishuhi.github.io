---
title: Linux中命令行的使用
top_img: transparent
tags: Linux
abbrlink: 40419
date: 2021-04-04 21:43:28
---

# 1.命令行基本用法

1.编辑修改命令行。

2.调用历史命令。按上、下箭头可在命令行上逐次显示已经执行过的各条命令。

3.自动补全命令。bash具有命令自动不全的功能，当输入了命令、文件名的一部分时，按Tab键就可以将剩余的部分补全。

4.一行多条命令。可在一个命令行中使用多个命令，用  “;” 将各个命令隔开。

```bash
ls -l;pwd
```

5.命令行续行。可在几个命令行中输入一个命令，用反斜杠“\"将一个命令行持续到下一行。

```bash
ls -l -a \
```

6.强制中断命令运行。在执行命令的过程中，可使用组合键Ctrl+C强制中断当前运行的命令或程序。

Shell提示符中，管理员为#，普通用户为$

# 2.sudo命令

当看到命令提示符为$，又需要执行root权限的命令时，需要在命令前加sudo，根据提示输入正确密码，就会以超级用户的身份执行该命令。

在Ubuntu中可以通过执行sudo -i，输入密码，暂时切换到root身份登录，执行完命令后输入exit命令回到普通用户状态。

使用su命令临时改变用户身份，可以让一个普通用户切换为超级用户或者其他用户，需输入密码；也可使超级用户切换为普通用户，无需输入密码。

# 3.绝对路径与相对路径

绝对路径：绝对路径为根目录（/）开始的文件名或目录名称

```shell
/home/zhongxp/.bashrc
```

相对路径：相对于当前路径的文件名写法，开头不是根目录就属于相对路径的写法

```shell
../../home/zhongxp/
```

"/" 表示根目录

"." 或 "./" 表示当前目录

".." 或 "../" 表示上一层目录

"~" 表示当前用户的主目录

# 4.使用命令行进行目录操作

## 4.1创建目录

使用 mkdir 命令创建由目录名命名的目录。

如果在目录名前面没有加任何路径名，则在当前目录下创建；如果给出了一个存在的路径，将会在指定的路径下创建。

语法格式：

```shell 
mkdir [选项] 目录名
mkdir /usr/test
```

选项 -p 表示要建立的目录的父目录尚未建立，将同时创建父目录。

## 4.2删除目录

使用 rmdir 命令从一个目录中删除一个或多个空的子目录。

语法格式：

```shell
rmdir [选项] 目录名
```

选项 -p 表示递归删除目录，当子目录被删除后父目录为空时，也一同被删除。如果是非空目录则保留下来。

## 4.3改变工作目录

（1）cd 命令

cd 命令用来改变工作目录。当不带任何参数时，返回到用户的主目录。

（2）pwd 命令

pwd 命令用来显示当前工作目录的绝对路径，没有任何选项或参数。

## 4.4显示目录内容

ls 命令列出指定目录的内容，语法格式为：

```shell
ls [选项] [目录或文件夹]
```

默认情况下输出条目按字母顺序排列。如果没有给出参数，则将显示当前目录下所有子目录和文件信息。

选项及含义如下：

| -a   | 显示所有的文件，包括以 "." 开头的文件  |
| ---- | -------------------------------------- |
| -c   | 按文件修改时间排序                     |
| -i   | 在输出的第1列显示文件的索引节点号      |
| -l   | 以长格式显示文件的详细信息             |
| -r   | 按逆序显示ls命令的输出结果             |
| -R   | 递归的显示指定目录的各个子目录中的文件 |

# 5.使用命令行进行文件操作

## 5.1文件内容显示

1 .cat 命令

```shell
cat [选项] [文件名1] [文件名2]
```

作用一：显示文件的内容。依次读取参数文件1 所指明的文件，并将它们的内容输出到标准输出上。

作用二：连接两个或多个文件，如 cat f1 f2>f3, 将文件f1和文件f2的内容合并起来，然后通过输出重定向符>将它们的内容存入文件f3中。

2. more 命令

```shell
more [选项] [文件名]
```

如果文件太长，用 cat 命令只能看见最后一页，而 more 命令可以逐页显示。

该命令一次显示一屏文本，满屏后显示停下来，并且在每个屏幕的底部显示出已经显示该文件的百分比。

3. less 命令

```shell
less [选项] [文件名]
```

分页显示文件内容，比 more 更强大，更灵活。

4. head 命令

```shell
head [选项] [文件名]
```

显示文件开头的若干行或多少个字节。

选项 -n （n为行数值）指定从文件开头的显示行数，默认为10行。

选项 -c 后跟参数指定从文件开头的显示字节数。如：head -c 50 /etc/passwd （字节数可使用单位，b为512字节，kB为1000字节，K为1024字节）

5. tail 命令

```shell
tail [选项] [文件名]
```

与 head 相反

6. od 命令

```shell
od [选项] [文件名]
```

按照特殊格式查看文件内容

## 5.2文件内容查找

grep 命令用来在文本文件中查找指定模式的单词或短语，并在标准输出上显示包括给定字符串模式的所有行。

```
grep [选项]... 模式 [文件名]...
```

使用选项对匹配方式进行控制：

| -i   | 表示忽略大小写     |
| ---- | ------------------ |
| -x   | 强制整行匹配       |
| -w   | 强制关键字完全匹配 |
| -e   | 定义正则表达式     |

使用选项对查找结果输出进行控制：

| -m   | 定义多少次匹配后停止搜索 |
| ---- | ------------------------ |
| -H   | 为每一匹配项打印文件名   |
| -r   | 在指定目录中进行递归查询 |
| -n   | 指定输出的同时打印行号   |

## 5.3文件内容比较

1. comm 命令

对两个已经排好序的文件进行逐行比较，只显示它们的共有行。

```shell
comm [选项] 文件1 文件2
```

选项-1表示不显示仅在文件1中存在的行；

选项-2表示不显示仅在文件2中存在的行；

选项-3表示不显示在 comm 命令输出中的第1列、第2列和第3列。

2. diff 命令

```shell
diff [选项] 文件1 文件2
```

逐行比较两个文件，列出它们的不同之处，并且提示为使两个文件一致，需要修改哪些行。如果两个文件完全一致，则该命令不显示任何输出。

## 5.4文件内容排序

sort 命令用于对文本文件的各行进行排序，并将结果显示。

```shell
sort [选项] 文件名列表
```

## 5.5文件内容统计

wc 命令用于统计出指定文件的字节数、字数、行数，并输出结果。

```shell
wc [选项] 文件名列表
```

选项：

| -c   | 表示统计字节数 |
| ---- | -------------- |
| -l   | 表示统计行数   |
| -w   | 表示统计字数   |

## 5.6文件查找

1. find 命令

```shell
find [路径] [匹配表达式]
```

2. locate 命令

```shell
locate [选项]... [模式]...
```

## 5.7文件（目录）复制、删除和移动

1. cp 命令

将源文件或目录复制到目标文件或目录中。

```shell
cp [选项] 源文件或目录 目标文件或目录
```

2. rm 命令

可以删除一个目录中的一个或多个文件和目录，也可以将某个目录及其下属的所有文件和子目录删除。

```shell
rm [选项] 文件列表
```

该命令用于链接文件，只是删除整个链接文件，而原有文件保持不变。

3. mv 命令

用来移动文件或目录，还可以在移动的同时修改文件或目录名。

```shell
mv [选项] 源文件或目录 目标文件或目录
```

选项 -i 表示交互模式，当移动的目录已存在同名的目标文件时，用覆盖方式写文件，但在写入之前给出提示。

选项 -f 表示在目标文件已存在时，不给出任何提示。

## 5.8链接文件创建

ln 命令在文件之间创建链接。

```shell
#建立符号链接文件
ln -s 目标（原文件或目录） 链接文件

#建立硬链接文件
ln 目标（原文件） 链接文件
```

链接的对象可以是文件，也可以是目录。如果链接指向目录，那么用户就可以利用该链接直接进入被链接的目录，而不用给出达到该目录的一长串路径。

## 5.9文件压缩与解压缩

1. gzip 命令

```shell
gzip [选项] 压缩文件名/解压缩文件名
```

gzip 命令用于对文件进行压缩与解压缩。被压缩的文件扩展名是 .gz。

2. unzip 命令

```shell
unzip [选项] 压缩文件名
```

用于对winzip格式的压缩文件进行解压缩。

3. tar 命令

```shell
tar [选项] 文件或目录名
```

用于对文件和目录打包。

# 6.用户

1.添加用户账号

```shell
#创建用户
useradd <选项> <用户名>

#创建用户，并指定有效期，2099-12-30到期
useradd -e 12/30/2099 <用户名>
```

选项：

- `-c comment`指定一段注释性描述

- `-d 目录`指定用户主目录，如果此目录不存在，则同时使用`-m`选项，可以创建主目录

- `-g 用户组`指定用户所属的用户组

- `-G 用户组, 用户组`指定用户所属的附加组

- `-s shell文件指定用户的登陆	shell	

- `-u 用户号`指定用户的用户号，如果同时有`-o`选项，可以重复使用其他用户的标识号

  例如：

```shell
useradd –d  /home/sam -m sam
useradd -s /bin/sh -g group –G adm,root gem
```

2.删除用户账号

```shell
userdel <选项> <用户名>
```

常用的选项是`-r`，作用是把用户的主目录一起删除

例如：

```shell
user -r sam
```

3.修改用户账号

```shell
usermod <选项> <用户名>
```

常用的选项包括`-c`,`-d`,`-m`,`-g`,`-G`,`-s`,`-u`以及`-o`等，`-l`指定新的用户名

例如：

```shell
usermod -s /bin/ksh -d /home/z –g developer sam
```

此命令将用户`sam`的登陆`Shell`修改为`ksh`，主目录改为`/home/z`，用户组改为`developer`

4.用户密码的管理

超级用户可以为自己和其他用户设置密码，普通用户只能修改它自己的密码

```shell
passwd <选项> <用户名>
```

选项：

- `-l`，锁定密码，即禁用账号
- `-u`密码解锁
- `-d`使账号无密码
- `-f`强迫用户下次登陆时修改密码

如果是默认用户名，则修改当前用户的密码。

```shell
passwd
```

5.查看用户

```shell
cat /etc/passwd

#对于 cat /etc/passwd 的替换，打印出来的内容更清晰
cat /etc/passwd|grep -v nologin|grep -v halt|grep -v shutdown|awk -F":" '{ print $1"|"$3"|"$4 }'|more

#查看当前活跃的用户列表
w
```

# 7.用户组

1.增加新的用户组

```shell
groupadd <选项> <用户组>
```

2.删除已有的用户组

```shell
groupdel <用户组>
```

3.修改用户组的属性

```shell
groupmod <选项> <用户组>
```

选项：

- `-g GID`为用户组指定新的标识号
- `-n 新用户组`将用户组的名字改为新名字

```shell
#将组group1的标识号改为1000，并将组名修改为group2
groupmod -g 1000 -n group2 group1
```

4.查看用户组

```shell
cat /etc/group
```

# 8.用户在用户组之间切换

如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限。

用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组。

例如：

```shell
newgrp root
```

这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组。类似于用户账号的管理，用户组的管理也可以通过集成的系统管理工具来完成。